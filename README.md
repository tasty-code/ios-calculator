# SeSAC ê³„ì‚°ê¸° í”„ë¡œì íŠ¸

# ğŸ’™ Team MABLE ğŸŒ
ğŸƒğŸ»ğŸƒğŸ»â€â™‚ï¸ğŸ’¨ **í”„ë¡œì íŠ¸ ê¸°ê°„:** `23.01.16` ~ `23.01.27`

|<img src="https://avatars.githubusercontent.com/u/71758542?v=4" width=200>|<img src="https://avatars.githubusercontent.com/u/59835351?v=4" width=200>|
|:---:|:---:|
|[ğŸ’™ Blue ğŸ’™](https://github.com/bomyuniverse)|[ğŸŒ Mason ğŸŒ](https://github.com/qwerty3345)|

### âœ… ê·¸ë¼ìš´ë“œ Rule

- ì½”ë“œ ì»¨ë²¤ì…˜
    - ê¸°ì¤€: [https://github.com/kodecocodes/swift-style-guide](https://github.com/kodecocodes/swift-style-guide)
- ì»¤ë°‹ ì»¨ë²¤ì…˜, ê¹ƒ í”Œë¡œìš°
    - ì»¤ë°‹ ë‹¨ìœ„ëŠ” ìµœëŒ€í•œ ì‘ì€ ê¸°ëŠ¥ë‹¨ìœ„ë¡œ!
    - ì†Œë¬¸ìë¡œ (feat: ë‚´ìš©)
    - âœ¨Â **Git Commit Convention**
        - Prefix ì „ì²´ ì†Œë¬¸ì, **`prefix:`**
        - `feat`Â = ì£¼ë¡œ ì‚¬ìš©ìì—ê²Œ ìƒˆë¡œìš´ ê¸°ëŠ¥ì´ ì¶”ê°€ë˜ëŠ” ê²½ìš°
        - `fix`Â = ì‚¬ìš©ìê°€ ì‚¬ìš©í•˜ëŠ” ë¶€ë¶„ì—ì„œ bugê°€ ìˆ˜ì •ë˜ëŠ” ê²½ìš°
        - `docs`Â = ë¬¸ì„œì— ë³€ê²½ ì‚¬í•­ì´ ìˆëŠ” ê²½ìš°
        - `style`Â = ì„¸ë¯¸ì½œë¡ ì„ ê¹Œë¨¹ì–´ì„œ ì¶”ê°€í•˜ëŠ” ê²ƒ ê°™ì´ í˜•ì‹ì ì¸ ë¶€ë¶„ì„ ë‹¤ë£¨ëŠ” ê²½ìš° (ì½”ë“œì˜ ë³€í™”ê°€ ìƒì‚°ì ì¸ ê²ƒì´ ì•„ë‹Œ ê²½ìš°)
        - `refactor`Â = production codeë¥¼ ìˆ˜ì •í•˜ëŠ” ê²½ìš° (ë³€ìˆ˜ì˜ ë„¤ì´ë°ì„ ìˆ˜ì •í•˜ëŠ” ê²½ìš°)
        - `test`Â = í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜, ì¶”ê°€í•˜ëŠ” ê²½ìš° (ì½”ë“œì˜ ë³€í™”ê°€ ìƒì‚°ì ì¸ ê²ƒì´ ì•„ë‹Œ ê²½ìš°)
        - `chore`Â = ë³„ë¡œ ì¤‘ìš”í•˜ì§€ ì•Šì€ ì¼ì„ ìˆ˜ì •í•˜ëŠ” ê²½ìš° (ì½”ë“œì˜ ë³€í™”ê°€ ìƒì‚°ì ì¸ ê²ƒì´ ì•„ë‹Œ ê²½ìš°)
        - +) `design` = UI ë””ìì¸ì„ ë³€ê²½í–ˆì„ ë•Œ
    - step1, step2, step3
        - step1 ì‘ì—… â†’ main ë¨¸ì§€ â†’ PR â†’ step1 ë¦¬ë·° â†’ step1-fix
            - ì½”ë“œë¦¬ë·°ê°€ 1ì¼ ë‚´ë¡œ ì•ˆì˜¬ ì‹œ, ë‹¤ìŒ ìŠ¤í… ë¯¸ë¦¬ ì§„í–‰ (conflict ì²œêµ­)
        - step2 ì‘ì—… â†’ main ë¨¸ì§€ â†’ PR â†’ step2 ë¦¬ë·° â†’ step2-fix
        - step3 ì‘ì—… â†’ main ë¨¸ì§€ â†’ PR â†’ step3 ë¦¬ë·° â†’ step3-fix
- ëª¨ë‹ ìŠ¤í¬ëŸ¼ ë°©ì‹
    - ì•„ì¹¨ ì»¨ë””ì…˜ ì²´í¬
    - ì „ë‚  ë­í–ˆëŠ”ì§€ ê°„ë‹¨íˆë¼ë„ ê³µìœ  (ìê¸°ì˜ wow í¬ì¸íŠ¸ê°€ ìˆìœ¼ë©´ ê³µìœ â€¦)
    - í”„ë¡œì íŠ¸ ì§„í–‰ìƒí™©, ì§„í–‰ë°©í–¥
        - ê·¸ë‚  ì‘ì—…í•  ê²ƒ, ì„¤ê³„â€¦ ë“±ë“±
- í”„ë¡œì íŠ¸ ì§„í–‰ ë°©ì‹
    - ì„¤ê³„ ìš°ì„  â†’ êµ¬í˜„ ì§„í–‰
    - 50ë¶„ í”„ë¡œì íŠ¸ / 10ë¶„ íœ´ì‹


# ğŸ’¬ UML
![](https://user-images.githubusercontent.com/70311145/188132535-8bc81913-7863-4877-88f9-0f8e811a52bd.jpeg)

# ğŸ“Â ê°ì²´ë³„ ì—­í• ê³¼ ì±…ì„

| Name | Type | ì—­í• ê³¼ ì±…ì„ |
| --- | --- | --- |
| Operator | enum | ê° ì—°ì‚°ì (+, -, Ã·, Ã—) ì¼€ì´ìŠ¤, ì¼€ì´ìŠ¤ë³„ ì—°ì‚° ë¡œì§ |
| CalculateItem | protocol | ì—°ì‚° ê°€ëŠ¥ ìš”ì†Œë¥¼ ì œí•œí•˜ê¸° ìœ„í•œ protocol |
| ExpressionParser | enum | ì—°ì‚°ì •ë³´ì¸ input ë¬¸ìì—´ì„ ë°›ì•„ íŒŒì‹± í•´ Formula ë¡œ ë³€í™˜í•¨ |
| Formula | enum | ì—°ì‚°ì, í”¼ì—°ì‚°ì Queueë“¤ì„ ê°–ê³ , í•´ë‹¹ ìš”ì†Œë“¤ì˜ ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆëŠ” ê°ì²´ |
| CalculatorItemQueue | struct | ì—°ì‚°ì, í”¼ì—°ì‚°ìë¥¼ ì €ì¥í•˜ëŠ” Queue ìë£Œêµ¬ì¡° (ë§í¬ë“œ ë¦¬ìŠ¤íŠ¸ êµ¬ì¡°ë¡œ êµ¬í˜„) |
| LinkedList | struct | ë…¸ë“œê°„ì˜ ì—°ê²°ë¡œ êµ¬í˜„í•œ ë§í¬ë“œë¦¬ìŠ¤íŠ¸ ìë£Œêµ¬ì¡° |
| Node | class | ë§í¬ë“œë¦¬ìŠ¤íŠ¸ ë‚´ë¶€ì˜ ë…¸ë“œ |
| CalculatorError | enum | ê³„ì‚°ê¸°ì—ì„œ ë°œìƒí•  ìˆ˜ ìˆëŠ” ì˜¤ë¥˜ ì •ì˜ ë° Description ë©”ì„¸ì§€ ì •ì˜ |
| CalculatorViewController | class | UI ì™€ ì—°ê²°ë˜ì–´, ì‚¬ìš©ì ì…ë ¥ì„ ì²´í¬í•˜ê³  ì—°ì‚°ì„ ìˆ˜í–‰í•˜ëŠ” ë·°ì»¨íŠ¸ë¡¤ëŸ¬ |

# STEP 1

## êµ¬í˜„ ë‚´ìš©

- í(Queue) íƒ€ì…ê³¼ ííƒ€ì… êµ¬í˜„ì„ ìœ„í•œ List íƒ€ì…ì˜ UML ì‘ì„±

![ê³„ì‚°ê¸°_í”„ë¡œê·¸ë¨_í´ë˜ìŠ¤_ë‹¤ì´ì–´ê·¸ë¨](https://user-images.githubusercontent.com/59835351/212817217-4bcf6fa2-1907-436e-ac4e-a429951b4985.jpg)

- `CalculateItem`ì„ ì¤€ìˆ˜í•˜ëŠ” ìš”ì†Œë¥¼ ë‹¤ë£¨ëŠ”  `CalculatorItemQueue` êµ¬í˜„
- ë¹„ì–´ìˆëŠ” `CalculateItem`Â í”„ë¡œí† ì½œ ìƒì„±
- **(ì„ íƒ)** `CalculatorItemQueue`ì˜ ë‚´ë¶€ì—ì„œ ì‚¬ìš©í•˜ëŠ” List í˜•ì‹ì˜ ìë£Œêµ¬ì¡°ë¥¼ `LinkedList`ë¡œ êµ¬í˜„
    - `LinkedList` êµ¬í˜„ì„ ìœ„í•œ `Node` í´ë˜ìŠ¤ ìƒì„±

# STEP 2

## êµ¬í˜„ ë‚´ìš©

- ì œì‹œëœ UMLëŒ€ë¡œ ì—°ì‚°ê³¼ ê´€ë ¨ëœ íƒ€ì… êµ¬í˜„
- ê³ ì°¨í•¨ìˆ˜ compactMap, flatMap, reduce í™œìš©
- 0ìœ¼ë¡œ ë‚˜ëˆ„ê¸°ë¥¼ ì‹œë„í•˜ëŠ” ê²½ìš° ì ì ˆí•œ ì˜¤ë¥˜ì²˜ë¦¬
- í”¼ì—°ì‚°ìì™€ ì—°ì‚°ìì˜ ê°œìˆ˜ê°€ ì˜ëª»ëœ ê²½ìš°
- ì—°ì‚°í•  ìš”ì†Œê°€ íì— ì¡´ì¬í•˜ì§€ ì•ŠëŠ” ê²½ìš°


# STEP 3

## êµ¬í˜„ ë‚´ìš©

- ì‚¬ìš©ìì˜ í„°ì¹˜ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ì—¬ ì‹¤ì œë¡œ ì—°ì‚°ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ êµ¬í˜„
- ìˆ«ìë¥¼ ì…ë ¥í•˜ê³  ê³„ì‚°í•˜ëŠ” ê¸°ëŠ¥ì„ êµ¬í˜„
- ìŠ¤íƒ ë·°ì™€ ë ˆì´ë¸”ì„ í™œìš©í•˜ì—¬ ê³„ì‚° ë‚´ì—­ì„ í‘œì‹œ
- ê³„ì‚°ë‚´ì—­ì´ ê¸¸ì–´ì§€ë©´ ìœ„ì•„ë˜ë¡œ ìŠ¤í¬ë¡¤ ê°€ëŠ¥
- ê³„ì‚°ë‚´ì—­ì´ ìƒë‹¨ ê³µê°„ì„ ë„˜ì–´ ì´ì–´ì§€ëŠ” ê²½ìš°, ì‚¬ìš©ìì—ê²Œ ì œëŒ€ë¡œ ë³´ì¼ ìˆ˜ ìˆë„ë¡ ìƒˆë¡œ ì¶”ê°€ë  ë•Œ ìµœí•˜ë‹¨ìœ¼ë¡œ ìë™ ìŠ¤í¬ë¡¤ ë˜ë„ë¡ êµ¬í˜„

# â‰ï¸ ê³ ë¯¼ê³¼ í•´ê²°

## Queue êµ¬í˜„ ì‹œ Array vs Linked List

ë¨¼ì € Queue ë‚´ë¶€ì˜ ìš”ì†Œë¥¼ `**Array**`ë¡œ êµ¬í˜„í•˜ëŠ” ê²ƒì„ ê³ ë ¤í•˜ì˜€ìŠµë‹ˆë‹¤.
í•˜ì§€ë§Œ, **dequeue**ë¥¼ êµ¬í˜„í•˜ëŠ” ê²½ìš° `array.removeFirst`ë¥¼ í™œìš©í•˜ë©´
ë°°ì—´ íŠ¹ì„±ìƒ ì‚­ì œëœ ìš”ì†Œë¡œ ì¸í•´ ë‚¨ì•„ìˆëŠ” **ëª¨ë“  ìš”ì†Œë“¤ì˜ indexë¥¼ ë³€ê²½**í•´ì¤˜ì•¼ í•˜ê¸°ì— **ì‹œê°„ë³µì¡ë„**ê°€ ****$O(n)$ì´ ë˜ëŠ” ê²ƒìœ¼ë¡œ ë³´ì…ë‹ˆë‹¤.
ì–´ë–»ê²Œ í•˜ë©´ ì‹œê°„ë³µì¡ë„ë¥¼ $O(1)$ìœ¼ë¡œ ë§Œë“¤ ìˆ˜ ìˆì„ì§€ì— ëŒ€í•´ ê³ ë¯¼í•˜ì˜€ìŠµë‹ˆë‹¤.

### â³Â Queue ê¸°ëŠ¥ êµ¬í˜„ ì‹œ ì‹œê°„ ë³µì¡ë„

`dequeue` _ ê°€ì¥ ì•ì˜ ìš”ì†Œë¥¼ ì‚­ì œ

- Array ë¡œ êµ¬í˜„:  $O(n)$
- Linked List êµ¬í˜„: $O(1)$
    
    > head ë§Œ ì‚­ì œí•˜ê³ , í•´ë‹¹ ë‹¤ìŒ ë…¸ë“œë¥¼ head ë¡œ ì§€ì •í•´ì£¼ë©´ ë©ë‹ˆë‹¤.
    > 

`enqueue` _ ê°€ì¥ ë’¤ë¡œ ìš”ì†Œë¥¼ ì‚½ì…

- Array ë¡œ êµ¬í˜„: $O(1)$, ìµœì•…ì˜ ê²½ìš° $O(n)$
    - Array ì˜ append ë©”ì„œë“œë¥¼ í˜¸ì¶œí•˜ëŠ”ë°, 
    ë°°ì—´ì€ ì €ì¥ê³µê°„ì˜ ì‚¬ì´ì¦ˆê°€ ê³ ì •ë˜ì–´ ìˆê¸°ì—, í•´ë‹¹ ë°°ì—´ì˜ ìµœëŒ€ ì‚¬ì´ì¦ˆë¥¼ ë„˜ì–´ì„œ `append()` ë¥¼ ì‹¤í–‰í•˜ë©´ ì €ì¥ ê³µê°„ì„ realocateí•˜ëŠ” ì‘ì—…ì´ ë°œìƒí•˜ì—¬ ìµœì•…ì˜ ê²½ìš° ì‹œê°„ë³µì¡ë„ê°€ O(n)ì´ ë©ë‹ˆë‹¤.
- Linked List êµ¬í˜„: $O(1)$
    - reallocate ê°€ ë°œìƒí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.

### **ğŸ¤”Â ê·¸ë ‡ë‹¤ë©´ Linked List ë°©ì‹ì˜ ë‹¨ì ì€??**

- LinkedList ë¡œ êµ¬í˜„í•  ê²½ìš°, ê° Nodeê°€ ë‹¤ìŒ Nodeì˜ ì£¼ì†Œê°’ì„ ì°¸ì¡°í•´ì•¼ í•˜ë¯€ë¡œ ê° ë…¸ë“œë¥¼ class ë¡œ Heap ì˜ì—­ì— ì €ì¥í•´ì•¼ í•©ë‹ˆë‹¤.
    - Heap ì— ì €ì¥ë  í•„ìš”ê°€ ì—†ëŠ” ë°ì´í„°ë“¤ë„ Node class ë¡œ Wrapping í•´ì•¼ í•©ë‹ˆë‹¤.
- Linked List ë°©ì‹ì˜ ì „ì²´ì ì¸ ì‹œê°„ë³µì¡ë„ëŠ” ì¤„ì–´ë“¤ ìˆ˜ ìˆê² ì§€ë§Œâ€¦ ê³µê°„ ë³µì¡ë„ëŠ” í›¨ì”¬ ì»¤ì§€ì§€ ì•Šì„ê¹Œ ë¼ëŠ” ìƒê°ì´ ë“¤ì—ˆìŠµë‹ˆë‹¤?
- ì´ì—, ì–´ëŠ ë¶€ë¶„ì„ ìµœì í™” í•˜ëŠ” ê²ƒì„ ìš°ì„ ì‹œí•  ê²ƒì¸ê°€ì— ëŒ€í•œ **â€ì„ íƒì˜ ë¬¸ì œâ€** ë¼ê³  íŒë‹¨ì„ ë‚´ë ¸ìŠµë‹ˆë‹¤.
    
    > ì´ë²ˆ ê³„ì‚°ê¸° í”„ë¡œê·¸ë¨ ê°™ì€ ê²½ìš°ëŠ” Array ë¡œ êµ¬í˜„í•´ë„ í° ì°¨ì´ê°€ ë°œìƒí•˜ì§€ ì•Šì„ ê²ƒì´ë¼ íŒë‹¨ë˜ì§€ë§Œ, 
    í•™ìŠµì˜ ëª©ì ìœ¼ë¡œ Linked List ë¡œ êµ¬í˜„ í•´ ë³´ì•˜ìŠµë‹ˆë‹¤.
    > 

ğŸŒŸÂ ë¦¬ë·°ì–´ ì˜ê²¬: ì €ë¼ë©´ Array, LinkedList êµ¬í˜„ì— ëŒ€í•´ ëª…ì„¸ë¡œ ì •í•´ì§„ê²Œ ì—†ë‹¤ë©´ Arrayë¡œ êµ¬í˜„í–ˆì„ê±° ê°™ìŠµë‹ˆë‹¤.

## TDD

ì´ë²ˆ STEP1 ì—ì„œ Queue, Linked List íƒ€ì…ì„ êµ¬í˜„í•  ë•Œ TDD ë°©ì‹ìœ¼ë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.
ì‹¤íŒ¨ ì¼€ì´ìŠ¤ë¥¼ í•œ ê°œ í•´ê²°í•œ í›„ ë‹¤ìŒ ì¼€ì´ìŠ¤ë¥¼ ì‘ì„±í•˜ì˜€ëŠ”ë°, 
ì•ì„  ì‹¤íŒ¨ì¼€ì´ìŠ¤ë¥¼ í•´ê²°í•˜ë©´ì„œ [ìƒˆë¡œ ì‘ì„±í•œ í…ŒìŠ¤íŠ¸ ì¼€ì´ìŠ¤ë„ successê°€ ë˜ëŠ” ê²½ìš°](https://github.com/qwerty3345/ios-calculator/commit/226d732a502e8cd2ffffde01bd1f435a922e88c2)ê°€ ë°œìƒí•˜ì˜€ìŠµë‹ˆë‹¤.

```swift
// LinkedList.swift
func test_ì—¬ëŸ¬ìš”ì†Œë¥¼_appendí–ˆì„ë•Œ_ë§ˆì§€ë§‰ìœ¼ë¡œ_ë„£ì€_ìš”ì†Œê°€_tailì´ë‹¤() {
    // given
    let inputs = [1, 2, 3, 4, 5]

    // when
    inputs.forEach {
        sut.append($0)
    }
    guard let tailValue = sut.tail?.value as? Int else {
        return XCTFail()
    }

    // then
    XCTAssertEqual(inputs.last, tailValue)
}
```

ğŸŒŸÂ ë¦¬ë·°ì–´ ì˜ê²¬: ì •ì„ì ì¸ TDD ë°©ì‹ì´ë¼ë©´ í•œê°€ì§€ì— ëŒ€í•œ í…ŒìŠ¤íŠ¸ ì½”ë“œë¥¼ ì‘ì„±í•˜ê³  í…ŒìŠ¤íŠ¸ë¥¼ ì§„í–‰í•˜ê³  ìˆ˜ì •í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤!

## ì—ëŸ¬ ì¼€ì´ìŠ¤ì˜ ë„¤ì´ë°

0ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ê²½ìš°ì˜ ì˜¤ë¥˜ ì²˜ë¦¬ë¥¼ ìœ„í•´ Error íƒ€ì…ì„ ì •ì˜í•œ í›„ í•„ìš”í•˜ë‹¤ê³  ìƒê°ë˜ëŠ” ì—ëŸ¬ ì¼€ì´ìŠ¤ë“¤ì„ ì¶”ê°€í•˜ì˜€ìŠµë‹ˆë‹¤.
ì—ëŸ¬ì¼€ì´ìŠ¤ ì¤‘ í”¼ ì—°ì‚°ìì™€ ì—°ì‚°ìì˜ ê°œìˆ˜ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ê²½ìš° ì˜¤ë¥˜ë¥¼ ë°˜í™˜í•˜ëŠ” ì¼€ì´ìŠ¤ë¥¼ ì¶”ê°€í•˜ë ¤ê³  ë„¤ì´ë°ì„ í•˜ëŠ” ê³¼ì •ì— ë§ì€ ì‹œê°„ì„ í• ì• í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.

```swift
//CalculatorError.swift
enum CalculatorError: LocalizedError {
    case divideByZero
    case notMatchingCountOfOperatorsAndOperands
    case invalidDequeue

    var errorDescription: String? {
        switch self {
        case .divideByZero:
            return "NaN"
        case .notMatchingCountOfOperatorsAndOperands:
            return "í”¼ì—°ì‚°ìì™€ ì—°ì‚°ìì˜ ê°œìˆ˜ê°€ ì˜ëª»ë˜ì—ˆìŠµë‹ˆë‹¤."
        case .invalidDequeue:
            return "ì—°ì‚°í•  ìš”ì†Œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤."
        }
    }
}
```

- ë‹¤ë¥¸ ì—ëŸ¬ ì¼€ì´ìŠ¤ì²˜ëŸ¼ ì§§ê³  ëª…í™•í•˜ê²Œ ì ê³  ì‹¶ì—ˆìœ¼ë‚˜ ì ì ˆí•œ ë„¤ì´ë°ì´ ë– ì˜¤ë¥´ì§€ ì•Šì•„, ëª…í™•ì„±ì„ ì§€í‚¤ëŠ” ë°©ë²•ì„ ì„ íƒí•˜ì˜€ìŠµë‹ˆë‹¤.
- `notMatchingCountOfOperatorsAndOperands` ë¼ëŠ” ë„¤ì´ë°ì´ ë§ˆìŒì— ë“¤ì§„ ì•Šì•˜ì§€ë§Œ, ë‹¤ë¥¸ ë„¤ì´ë°ì´ ë– ì˜¤ë¥´ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.

> **Formula.swift**ì˜ `result()` ë©”ì„œë“œ ìˆ˜í–‰ ë¡œì§
> 
> 1. result() í•¨ìˆ˜ ì‹¤í–‰
> 2. í”¼ì—°ì‚°ìì— ìš”ì†Œê°€
>     - ìˆëŠ” ê²½ìš°: ì²« í”¼ì—°ì‚°ìë¥¼ dequeue
>     - ì—†ëŠ” ê²½ìš°: `invalidDequeue` error return
> 3. í”¼ì—°ì‚°ì íì˜ ìš”ì†Œ ê°œìˆ˜ì™€ ì—°ì‚°ì íì˜ ìš”ì†Œ ê°œìˆ˜ê°€
>     - ê°™ìœ¼ë©´: ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰
>     - â­Â ë‹¤ë¥´ë©´: `notMatchingCountOfOperatorsAndOperands` error return
> 4. ì—°ì‚°ìì™€ í”¼ì—°ì‚°ìë¥¼ dequeueí•œ ê°’ì´
>     - `nil`ì´ë¼ë©´: invalidDequeue error return
>     - `nil`ì´ ì•„ë‹ˆë¼ë©´: ë‹¤ìŒ ë‹¨ê³„ ì§„í–‰
> 5. 0ìœ¼ë¡œ ë‚˜ëˆ„ëŠ” ì—°ì‚°ì´
>     - ìˆëŠ” ê²½ìš°: `divideByZero` error return
>     - ì—†ëŠ” ê²½ìš°: ì—°ì‚° ìˆ˜í–‰

ğŸŒŸÂ ë¦¬ë·°ì–´ ì˜ê²¬: ì—ëŸ¬ ë„¤ì´ë°ì´ ëª…í™•í•œê±° ì¢‹ìŠµë‹ˆë‹¤~

## split ë¡œì§

ì €í¬ê°€ UML ì„ ë¶„ì„ í•œ ê²°ê³¼ëŠ” ì•„ë˜ì™€ ê°™ìŠµë‹ˆë‹¤.

1. inputì´ í•˜ë‚˜ì˜ String ê°’ìœ¼ë¡œ ë“¤ì–´ì˜¨ë‹¤. (â€1+2Ã·9â€â€¦)
2. í•´ë‹¹ ì—°ì‚° String ì„ ì—°ì‚°ì, í”¼ì—°ì‚°ì(ìˆ«ì)ë“¤ë¡œ íŒŒì‹±í•˜ê³  ê°ê° íì— ë‹´ì•„ Formula ë¥¼ ë°˜í™˜í•œë‹¤.
3. í•´ë‹¹ Formula ì˜ result ë¥¼ í˜¸ì¶œí•˜ì—¬ ê°ê°ì˜ íì— ë‹´ê¸´ ì—°ì‚°ì, í”¼ì—°ì‚°ìë¥¼ dequeue í•˜ì—¬ ê³„ì‚°í•˜ê³  ê²°ê³¼ê°’ì„ ë°˜í™˜í•¨.

ì´ ë•Œ 2ë²ˆì˜ íŒŒì‹± ë¡œì§ì— ìˆì–´ì„œ, ì €í¬ê°€ ìƒê°í•œ ë¡œì§ì€ 

- ì—°ì‚°ìëŠ” enum ì˜ rawValue ë¡œ ìƒì„±í•˜ì—¬ compactMap ìœ¼ë¡œ ë°°ì—´í™” í•´ì£¼ê³ ,
- í”¼ì—°ì‚°ì(ìˆ«ì)ëŠ” ê°ê°ì˜ ì—°ì‚°ìë¥¼ ê¸°ì¤€ìœ¼ë¡œ ì˜ë¼ì„œ ë°°ì—´í™” í•œë‹¤.

ì´ ë•Œ ì²˜ìŒ êµ¬ìƒí•œ í”¼ì—°ì‚°ì(ìˆ«ì) íŒŒì‹± ë¡œì§ì€ ê°ê°ì˜ ì—°ì‚°ì Character ë¥¼ Setìœ¼ë¡œ ë‹´ê³ , ë¬¸ìì—´ì„ í•œ ë²ˆì— í•´ë‹¹ ì—°ì‚°ìë“¤ì„ ê¸°ì¤€ìœ¼ë¡œ components ë¡œ ì˜ë¼ì£¼ëŠ” ë¡œì§ì´ì—ˆìŠµë‹ˆë‹¤.

> ì²˜ìŒì— êµ¬ìƒí•œ ìˆ«ì íŒŒì‹± ë¡œì§
> 

```swift
private static func componentsByOperaters(from input: String) -> [String] {
    let operatorCharacters = Operator.allCases.map { $0.rawValue }
    let operatorCharacterSet = CharacterSet()
    return input.components(separatedBy: operatorCharacterSet)
}
```

ê·¸ëŸ°ë°, UML ê¸°ëŠ¥ëª…ì„¸ì„œì˜ String extension ì˜ split ë©”ì„œë“œë¥¼ ì‚¬ìš©í•˜ì—¬ í•˜ë ¤ë‹ˆ, 
ì•„ë˜ì²˜ëŸ¼ ê°ê°ì˜ ìš”ì†Œë§ˆë‹¤ splitì„ í•˜ê³  flatMapì„ í•´ì£¼ëŠ” ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•´ì•¼ í–ˆìŠµë‹ˆë‹¤.

ì²˜ìŒ êµ¬ìƒí•œ ë¡œì§ë³´ë‹¤ ë¹„íš¨ìœ¨ì ì¸ ë¡œì§ì²˜ëŸ¼ ë³´ì˜€ì§€ë§Œâ€¦ ëª…ì„¸ì„œ UMLì˜ êµ¬ì¡°ë¥¼ ìµœëŒ€í•œ ì§€í‚¤ë ¤ ì´ë ‡ê²Œ êµ¬í˜„í•˜ì˜€ìŠµë‹ˆë‹¤. 

> ìµœì¢… êµ¬í˜„í•œ ìˆ«ì íŒŒì‹± ë¡œì§
> 

```swift
extension String {
		// UML ê¸°ëŠ¥ ëª…ì„¸ì— ìˆëŠ” í•¨ìˆ˜
    func split(with target: Character) -> [String] {
        return components(separatedBy: String(target))
    }
}

// enum ExpressionParser ë¡œì§
private static func componentsByOperaters(from input: String) -> [String] {
    return Operator.allCases.reduce([input]) { partialResult, calculatorOperator in
        partialResult.flatMap { $0.split(with: calculatorOperator.rawValue) }
    }
}
```

ğŸŒŸÂ ë¦¬ë·°ì–´ ì˜ê²¬: ì €ë¼ë©´ ëª…ì„¸ì„œë¥¼ ë”°ëì„ê±° ê°™ìŠµë‹ˆë‹¤. ì‹¤ì œë¡œ í”„ë¡œì íŠ¸ë¥¼ ì§„í–‰í•˜ë©´ì„œ ëª…ì„¸ì„œë¥¼ ì‘ì„±í• ë•Œì—ëŠ” ë‹¤ë¥¸ ê°œë°œìë“¤ê³¼ í•©ì˜ í•˜ì— ì‘ì„± í˜¹ì€ ìœ ì§€ë˜ê¸° ë•Œë¬¸ì— ë‹¤ë¥¸ ë°©ì‹ìœ¼ë¡œ êµ¬í˜„í•˜ê³  ì‹¶ë‹¤ë©´ ì‚¬ì „ì— ë…¼ì˜ë¥¼ ê±°ì³ì•¼í• ê±° ê°™ìŠµë‹ˆë‹¤.


## ScrollViewì˜ ìœ„ì¹˜ë¥¼ ì„¤ì • í•´ ì¤„ ë•Œì˜ ë¬¸ì œ (Drawing Cycle)

ê³„ì‚°ë‚´ì—­ì´ ìƒë‹¨ ê³µê°„ì„ ë„˜ì–´ ì´ì–´ì§€ëŠ” ê²½ìš°, ì‚¬ìš©ìì—ê²Œ ì œëŒ€ë¡œ ë³´ì¼ ìˆ˜ ìˆë„ë¡ ìƒˆë¡œ ì¶”ê°€ë  ë•Œ ìµœí•˜ë‹¨ìœ¼ë¡œ ìë™ ìŠ¤í¬ë¡¤ ë˜ë„ë¡ êµ¬í˜„í•´ê¸° ìœ„í•´  stackì´ ì¶”ê°€ëœ í›„ ìŠ¤í¬ë¡¤ ë·°ì˜ bottomOffsetë¥¼ ì¬ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.

- ë¦¬íŒ©í† ë§ ì „ì˜ ì½”ë“œëŠ” ê°€ì¥ ìµœì‹ ì— ì¶”ê°€ëœ stackì´ ì•„ë‹Œ ì´ì „ stack ì„ í•˜ë‹¨ìœ¼ë¡œ ìë™ ìŠ¤í¬ë¡¤ ë˜ì—ˆìŠµë‹ˆë‹¤. (ì´ë¯¸ì§€ ì°¸ê³ )
    
    ```swift
    // CalculatorViewController.swift - 131~132
    let bottomOffset = CGPoint(x: 0, y: self.historyScrollView.contentSize.height - self.historyScrollView.frame.size.height)
    self.historyScrollView.setContentOffset(bottomOffset, animated: true)
    ```
    
    ```markdown
    ![](https://user-images.githubusercontent.com/71758542/215037969-0b1589f2-0446-4286-81e4-e523045c707b.gif)
    ```
    
- ë·°ê°€ ì—…ë°ì´íŠ¸ ë˜ê¸° ì „ heightë¡œ offsetì´ ì„¤ì •ë˜ëŠ” ê²ƒìœ¼ë¡œ í™•ì¸í•˜ì˜€ê³ , í•´ë‹¹ ë¬¸ì œë¥¼ í•´ê²°í•˜ê¸° ìœ„í•´ `layoutIfNeeded()`ë¥¼ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
    
    ```swift
    // CalculatorViewController.swift
    historyScrollView.layoutIfNeeded()
    
    let bottomOffset = CGPoint(x: 0, y: self.historyScrollView.contentSize.height - self.historyScrollView.frame.size.height)
    self.historyScrollView.setContentOffset(bottomOffset, animated: true)
    ```
    
- `layoutIfNeeded()`ë¥¼ ì‚¬ìš©í•œ ì´ìœ ?
    - UIë¥¼ ì—…ë°ì´íŠ¸ í•˜ëŠ” íì˜  ë’¤ì— ì‚½ì…í•˜ëŠ” ê²ƒì´ ì•„ë‹ˆë¼, ë§¨ ì•ìª½ìœ¼ë¡œ ë°°ì¹˜í•˜ì—¬ ê³§ë°”ë¡œ UIê°€ ë³€í•˜ë„ë¡ í•˜ëŠ” ë©”ì„œë“œì´ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤.
    - í•´ë‹¹ ë©”ì†Œë“œê°€ í˜¸ì¶œë˜ë©´ 1/60ì´ˆì— í•œ ë²ˆì”© ì‹¤í–‰ë˜ëŠ” UpdateÂ Cycleì„ ë°”ë¡œ ì‹¤í–‰í•˜ì—¬ ë ˆì´ì•„ì›ƒì´ ì¦‰ê°ì ìœ¼ë¡œ ì ìš©ë©ë‹ˆë‹¤.
    - `layoutIfNeeded()`ë¥¼ stackì´ ì¶”ê°€ëœ ì½”ë“œì™€ offsetì„ ì„¤ì •í•˜ëŠ” ì½”ë“œ ì‚¬ì´ì— ì‹¤í–‰ë˜ë„ë¡ í•˜ì—¬, stackì´ ì¶”ê°€ëœ scrollViewì˜ heightê°’ì„ ì‚¬ìš©í•  ìˆ˜ ìˆë„ë¡ í•˜ì˜€ìŠµë‹ˆë‹¤.

## NumberFormatter

- ì…ë ¥í•œ ìˆ«ìì™€, ê³„ì‚°ì™„ë£Œ ê²°ê³¼ ìˆ«ìë¥¼ 1,000 ë‹¨ìœ„ë¡œ ì‰¼í‘œë¥¼ ë¶™ì—¬ì£¼ê¸° ìœ„í•´ ì‚¬ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.
    
    > `.numberStyle` ì„ `decimal` ë¡œ ì„¤ì •í•˜ì˜€ìŠµë‹ˆë‹¤.
    > 
- ë™ì‘ ë¡œì§ : ì‚¬ìš©ìê°€ ìˆ«ìë¥¼ ì…ë ¥ â†’ ì—°ì‚°ìë¥¼ ëˆ„ë¦„ â†’ ì…ë ¥ëœ ìˆ«ìë¥¼ `formatter`ë¡œ ë³€ê²½ â†’ ë³€ê²½ëœ ìˆ«ìë¥¼ StackViewë¡œ ì‚½ì…
- íŠ¸ëŸ¬ë¸” ìŠˆíŒ…: â€œ=â€ ì„ ëˆŒëŸ¬ ê³„ì‚°ì„ í•  ë•Œ ì‚¬ìš©ì ì…ë ¥ì°½ ë¶€ë¶„ì— ê²°ê³¼ê°’ì„ formatted ëœ í˜•íƒœë¡œ ë³´ì—¬ì¤ë‹ˆë‹¤.
    - ì›ë˜ `format` í•˜ëŠ” ë¡œì§ì€ double ê°’ì„ formatter ë¡œ ë³€ê²½í•˜ëŠ” ë¡œì§ì´ê³ ,
    ì´ë¯¸ formatted ëœ ê³„ì‚°ëœ ê°’ì„ Doubleë¡œ ë³€í™˜í•˜ë ¤ í•˜ë‹ˆ â€œ,â€ ì‰¼í‘œê°€ ë“¤ì–´ê°€ ìˆê¸°ì— íƒ€ì… ìºìŠ¤íŒ…ì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.
    - ì´ì—, â€œ,â€ ì‰¼í‘œë¥¼ ì œê±°í•˜ê³  í•´ë‹¹ ì—°ì‚°ì„ ìˆ˜í–‰í•˜ë„ë¡ ì²˜ë¦¬ì˜€ìŠµë‹ˆë‹¤. 
    (ë‹¤ë§Œ ì‰¼í‘œë¥¼ ë¶™ì—¬ì¤¬ë‹¤ ë–¼ëŠ” ë¡œì§ì´ê¸°ì— ë¹„íš¨ìœ¨ì ì¸ ë¶€ë¶„ì€ ì¡´ì¬í•  ê²ƒì´ë¼ íŒë‹¨í–ˆìŠµë‹ˆë‹¤.)
    - ì°¨í›„ í•„ìš” ì‹œ, ê³„ì‚°ëœ ê°’ì„ì„ ì•Œë¦¬ëŠ” flag ë¥¼ ë‘ê³  í•´ë‹¹ flag ë¡œ ì²´í¬ í•œ ë’¤ ì²˜ë¦¬í•´ë„ ë  ë“¯ í•©ë‹ˆë‹¤.
- cf) ë©”ëª¨ë¦¬ íš¨ìœ¨ì„ ìœ„í•´, ë©”ì„œë“œ ë‚´ë¶€ì—ì„œ `formatter` ë¥¼ ë§¤ë²ˆ ìƒì„±í•˜ëŠ” ê²ƒì´ ì•„ë‹Œ, ë·°ì»¨íŠ¸ë¡¤ëŸ¬ì˜ í”„ë¡œí¼í‹°ë¡œ ìƒì„±í•œ ë’¤ `format` ë©”ì„œë“œì—ì„œ í•´ë‹¹ í”„ë¡œí¼í‹°ë¥¼ í˜¸ì¶œí•´ì„œ ì‚¬ìš©í•˜ë„ë¡ ì²˜ë¦¬í•˜ì˜€ìŠµë‹ˆë‹¤.
    
    ```swift
    // ViewController
    private let formatter = NumberFormatter()
    
    private func format(number: Double) -> String? {
        formatter.numberStyle = .decimal
        formatter.maximumFractionDigits = 20
    
        return formatter.string(for: number)
    }
    ```

